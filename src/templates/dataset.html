{% extends "base.html" %}

{% block title %}Dataset{% endblock title %}
{% block content %}
{% load custom_tags %}

<div class="col-sm-8">
    <h4>Dataset {{ filename }}</h4>

    <form method="get" action="{% url 'show_dataset_aggregate' id=id %}">
        {% csrf_token %}
        <button type="submit">Aggregate</button>
    </form>

    <table>
        <tr>
            {% for column_name in header %}
            <th>{{ column_name }}</th>
            {% endfor %}
        </tr>

        {% for row in data %}
        <tr>
            {% for column_name in header %}
            {% with row|get_item:column_name as value %}
            <td>{{ value }}</td>
            {% endwith %}
            {% endfor %}
        </tr>
        {% endfor %}
    </table>
</div>

<form method="get" action="{% url 'show_dataset' id=id %}">
    {% csrf_token %}
    <input type="hidden" name="page_index" value="{{ page_index|add:1 }}">
    <button type="submit">Load more</button>
</form>

{% endblock content %}
